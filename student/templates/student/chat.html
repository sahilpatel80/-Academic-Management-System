{% extends 'student/base.html' %}
{% load static %}

{% block title %}
  Messages | Academic Cloud
{% endblock %}

{% block header_title %}
  Messages
{% endblock %}

{% block sidebar_menu %}
  <a href="{% url 'student:student_dashboard' %}" class="flex items-center gap-3 px-6 py-3 text-[#616f89] hover:bg-gray-50 transition-colors">
    <span class="material-symbols-outlined">dashboard</span>
    <span class="font-medium text-sm">Dashboard</span>
  </a>

  <a href="{% url 'student:assignments' %}" class="flex items-center gap-3 px-6 py-3 text-[#616f89] hover:bg-gray-50 transition-colors">
    <span class="material-symbols-outlined">assignment</span>
    <span class="font-medium text-sm">Assignments</span>
  </a>

  <a href="{% url 'student:classes' %}" class="flex items-center gap-3 px-6 py-3 text-[#616f89] hover:bg-gray-50 transition-colors">
    <span class="material-symbols-outlined">menu_book</span>
    <span class="font-medium text-sm">Classes</span>
  </a>

  <a href="{% url 'student:chat' %}" class="flex items-center gap-3 px-6 py-3 bg-blue-50/50 text-primary border-r-4 border-primary transition-colors">
    <span class="material-symbols-outlined font-variation-settings-'FILL'-1">chat_bubble</span>
    <span class="font-medium text-sm">Chat</span>
  </a>

  <a href="{% url 'student:profile' %}" class="flex items-center gap-3 px-6 py-3 text-[#616f89] hover:bg-gray-50 transition-colors">
    <span class="material-symbols-outlined">person</span>
    <span class="font-medium text-sm">Profile</span>
  </a>
{% endblock %}

{% block content %}
  <div class="max-w-5xl mx-auto h-[calc(100vh-140px)] flex flex-col md:flex-row gap-6">
    <div class="w-full md:w-1/3 flex flex-col bg-white dark:bg-[#151b2b] rounded-2xl shadow-soft border border-[#dbdfe6] dark:border-white/10 overflow-hidden">
      <div class="p-4 border-b border-gray-100 dark:border-white/10 bg-gray-50/50 dark:bg-white/5">
        <div class="relative mb-4">
          <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-[20px]">search</span>
          <input type="text" class="w-full bg-white dark:bg-[#101622] border border-gray-200 dark:border-white/10 rounded-xl py-2 pl-10 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 placeholder:text-gray-400" placeholder="Search chats..." />
        </div>

        <div class="flex p-1 bg-gray-200 dark:bg-[#101622] rounded-lg">
          <button class="flex-1 py-1.5 text-xs font-bold rounded-md shadow-sm bg-white dark:bg-[#151b2b] text-primary transition-all">All</button>
          <button class="flex-1 py-1.5 text-xs font-bold text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-all">Groups</button>
          <button class="flex-1 py-1.5 text-xs font-bold text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-all">Direct</button>
        </div>
      </div>

      <div class="flex-1 overflow-y-auto">
        <div class="flex items-center gap-3 px-4 py-4 bg-blue-50/30 dark:bg-white/5 border-l-4 border-primary cursor-pointer transition-colors">
          <div class="relative shrink-0">
            <div class="size-12 rounded-full bg-primary/10 flex items-center justify-center text-primary border border-primary/20">
              <span class="material-symbols-outlined">groups</span>
            </div>
            <div class="absolute -bottom-0.5 -right-0.5 size-3 bg-green-500 border-2 border-white dark:border-[#151b2b] rounded-full"></div>
          </div>
          <div class="flex-1 min-w-0">
            <div class="flex justify-between items-baseline mb-0.5">
              <h3 class="text-sm font-bold text-gray-900 dark:text-white truncate">CS101 - Intro to Prog.</h3>
              <span class="text-[10px] text-gray-400 font-medium">10:45 AM</span>
            </div>
            <p class="text-xs text-gray-600 dark:text-gray-400 truncate">
              <span class="font-bold text-primary">Prof:</span> Don't forget the deadline!
            </p>
          </div>
        </div>

        <div class="flex items-center gap-3 px-4 py-4 hover:bg-gray-50 dark:hover:bg-white/5 cursor-pointer transition-colors border-b border-gray-50 dark:border-white/5">
          <div class="relative shrink-0">
            <div class="size-12 rounded-full bg-cover bg-center border border-gray-100 dark:border-white/10" style="background-image: url('https://randomuser.me/api/portraits/women/44.jpg')"></div>
            <div class="absolute -bottom-0.5 -right-0.5 size-3 bg-gray-300 border-2 border-white dark:border-[#151b2b] rounded-full"></div>
          </div>
          <div class="flex-1 min-w-0">
            <div class="flex justify-between items-baseline mb-0.5">
              <h3 class="text-sm font-bold text-gray-900 dark:text-white truncate">Dr. Sarah Jenkins</h3>
              <span class="text-[10px] text-gray-400 font-medium">9:12 AM</span>
            </div>
            <p class="text-xs text-gray-500 dark:text-gray-400 truncate">I've reviewed your thesis draft.</p>
          </div>
        </div>

        <div class="flex items-center gap-3 px-4 py-4 hover:bg-gray-50 dark:hover:bg-white/5 cursor-pointer transition-colors border-b border-gray-50 dark:border-white/5">
          <div class="relative shrink-0">
            <div class="size-12 rounded-full bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center text-purple-600 border border-purple-100 dark:border-purple-900/30">
              <span class="material-symbols-outlined">science</span>
            </div>
          </div>
          <div class="flex-1 min-w-0">
            <div class="flex justify-between items-baseline mb-0.5">
              <h3 class="text-sm font-bold text-gray-900 dark:text-white truncate">BIO202 - Lab B</h3>
              <span class="text-[10px] text-gray-400 font-medium">Yesterday</span>
            </div>
            <p class="text-xs text-purple-500 dark:text-purple-400 truncate italic">Marcus is typing...</p>
          </div>
        </div>

        <div class="flex items-center gap-3 px-4 py-4 hover:bg-gray-50 dark:hover:bg-white/5 cursor-pointer transition-colors border-b border-gray-50 dark:border-white/5 opacity-70">
          <div class="relative shrink-0">
            <div class="size-12 rounded-full bg-cover bg-center border border-gray-100 dark:border-white/10" style="background-image: url('https://randomuser.me/api/portraits/men/32.jpg')"></div>
          </div>
          <div class="flex-1 min-w-0">
            <div class="flex justify-between items-baseline mb-0.5">
              <h3 class="text-sm font-bold text-gray-900 dark:text-white truncate">Prof. Michael Chen</h3>
              <span class="text-[10px] text-gray-400 font-medium">Mon</span>
            </div>
            <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Midterm grades are posted.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="hidden md:flex flex-col flex-1 bg-white dark:bg-[#151b2b] rounded-2xl shadow-soft border border-[#dbdfe6] dark:border-white/10 overflow-hidden relative">
      <div class="h-16 border-b border-gray-100 dark:border-white/10 flex items-center justify-between px-6 bg-gray-50/30 dark:bg-white/5">
        <div class="flex items-center gap-3">
          <div class="size-10 rounded-full bg-primary/10 flex items-center justify-center text-primary">
            <span class="material-symbols-outlined">groups</span>
          </div>
          <div>
            <h3 class="font-bold text-gray-900 dark:text-white">CS101 - Intro to Programming</h3>
            <p class="text-xs text-green-600 dark:text-green-400 flex items-center gap-1">
              <span class="size-1.5 rounded-full bg-green-500"></span> 32 Members Online
            </p>
          </div>
        </div>
        <button class="text-gray-400 hover:text-gray-600"><span class="material-symbols-outlined">more_vert</span></button>
      </div>

      <div class="flex-1 p-6 overflow-y-auto space-y-6">
        <div class="flex items-end gap-3">
          <div class="size-8 rounded-full bg-gray-200 bg-cover" style="background-image:url('https://randomuser.me/api/portraits/women/65.jpg')"></div>
          <div class="flex flex-col gap-1 max-w-[70%]">
            <span class="text-[10px] text-gray-500 ml-1">Elena â€¢ 10:30 AM</span>
            <div class="bg-gray-100 dark:bg-white/10 p-3 rounded-2xl rounded-bl-none text-sm text-gray-800 dark:text-gray-200">Does anyone have the notes from yesterday's lecture? I missed the last part.</div>
          </div>
        </div>

        <div class="flex flex-col items-end gap-1">
          <div class="bg-primary text-white p-3 rounded-2xl rounded-br-none text-sm max-w-[70%] shadow-md">Yes, I'll share the PDF in a moment.</div>
          <span class="text-[10px] text-gray-400 mr-1">Read 10:32 AM</span>
        </div>

        <div class="flex items-end gap-3">
          <div class="size-8 rounded-full bg-primary/10 flex items-center justify-center text-primary border border-primary/20 font-bold text-xs">P</div>
          <div class="flex flex-col gap-1 max-w-[70%]">
            <span class="text-[10px] text-primary font-bold ml-1">Professor â€¢ 10:45 AM</span>
            <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900/30 p-3 rounded-2xl rounded-bl-none text-sm text-gray-800 dark:text-gray-200">
              <strong class="block text-primary text-xs mb-1">ðŸ“¢ Announcement</strong>
              Don't forget the project deadline is this Friday at 11:59 PM.
            </div>
          </div>
        </div>
      </div>

      <div class="p-4 bg-white dark:bg-[#151b2b] border-t border-gray-100 dark:border-white/10">
        <div class="flex items-center gap-2 bg-gray-100 dark:bg-[#101622] p-2 rounded-xl">
          <button class="p-2 text-gray-400 hover:text-primary transition-colors"><span class="material-symbols-outlined">add_circle</span></button>
          <input type="text" class="flex-1 bg-transparent border-none focus:ring-0 text-sm text-gray-800 dark:text-white placeholder-gray-400" placeholder="Type a message..." />
          <button class="p-2 text-gray-400 hover:text-gray-600 transition-colors"><span class="material-symbols-outlined">sentiment_satisfied</span></button>
          <button class="p-2 bg-primary text-white rounded-lg shadow-md hover:bg-blue-700 transition-colors"><span class="material-symbols-outlined text-[20px]">send</span></button>
        </div>
      </div>
    </div>
  </div>

  <button class="md:hidden fixed bottom-6 right-6 size-14 bg-primary text-white rounded-full shadow-lg flex items-center justify-center hover:scale-105 active:scale-95 transition-transform z-30"><span class="material-symbols-outlined text-[28px]">edit_square</span></button>
{% endblock %}
